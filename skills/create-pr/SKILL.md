---
name: create-pr
description: ghコマンドでプルリクエストを作成します。「PRを作って」「プルリクエストを出して」などの場面で使用します。
argument-hint: [PRの説明や補足情報]
allowed-tools: Bash, Read, Grep, Glob
---

# プルリクエスト作成スキル

## 概要

ghコマンドを使用して、現在のブランチからプルリクエストを作成します。
`.github/PULL_REQUEST_TEMPLATE.md` のテンプレートに沿った本文を生成します。

## 手順

以下の手順に従ってプルリクエストを作成してください：

### 1. 現在の状態を確認

以下のコマンドを並列で実行し、ブランチとコミットの状態を把握してください：

- `git status` で未コミットの変更がないか確認
- `git branch --show-current` で現在のブランチ名を取得
- `git log main..HEAD --oneline` でmainブランチからの差分コミットを確認
- `git diff main...HEAD --stat` で変更ファイルの概要を確認

未コミットの変更がある場合は、ユーザーに先にコミットするか確認してください。

### 2. リモートへプッシュ

現在のブランチがリモートにプッシュされていない場合、プッシュしてください：

```bash
git push -u origin !`git branch --show-current`
```

### 3. PRテンプレートの読み込み

`.github/PULL_REQUEST_TEMPLATE.md` を読み込み、テンプレートの構造を把握してください。

### 4. PR本文の作成

コミット履歴と変更内容を分析し、テンプレートの各セクションを埋めてください：

- **概要**: 変更の要約を1-2文で記述
- **変更内容**: 具体的な変更を箇条書きで記述
- **変更理由**: なぜこの変更が必要かを記述
- **テスト方法**: テンプレートのデフォルト項目を維持しつつ、変更に応じた確認項目を追加
- **備考**: 必要に応じて補足事項を記述

$ARGUMENTS が指定されている場合は、その内容をPR本文に反映してください。

### 5. PRの作成

以下の形式で `gh pr create` を実行してください：

```bash
gh pr create --title "PRタイトル" --body "$(cat <<'EOF'
テンプレートに沿った本文
EOF
)"
```

- タイトルは70文字以内で簡潔に
- 本文末尾に以下を追加：

```
---
Generated with [Claude Code](https://claude.ai/claude-code)
```

### 6. 結果の報告

作成されたPRのURLをユーザーに報告してください。

## ルール

- mainブランチ上では実行しないでください。ユーザーに新しいブランチの作成を促してください
- PRタイトルは日本語で記述してください
- テンプレートのセクション構造を必ず維持してください
- `--draft` フラグはユーザーが明示的に指定した場合のみ使用してください
